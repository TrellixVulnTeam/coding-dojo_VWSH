<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="/static/styles.css">
  <title>Login and Registration</title>
</head>
<body>
  <div class="container">
    <header class="text-center">
      <h1>Login and Registration</h1>
      {% with log_out = get_flashed_messages(category_filter=["logout"]) %}
        {% if log_out %}
          <div class="alert alert-warning" role="alert">
            {%- for msg in log_out %}
              {{ msg }}
            {% endfor -%}
          </div>
        {% endif %}
      {% endwith %}
    </header>
    <form class='registration' action="/create" method="post">
      <h2>Register</h2>
      {% with fn = get_flashed_messages(category_filter=["fn"]) %}
        {% if fn %}
          <div class="alert alert-danger" role="alert">
            {%- for msg in fn %}
              {{ msg }}
            {% endfor -%}
          </div>
        {% endif %}
      {% endwith %}
      <div class="form-group">
        <label>First name:</label>
        <input type="text" class="form-control" name="first-name" value="{{session['user_input']['fn'] if session['user_input']}}">
      </div>
      {% with ln = get_flashed_messages(category_filter=["ln"]) %}
        {% if ln %}
          <div class="alert alert-danger" role="alert">
            {%- for msg in ln %}
              {{ msg }}
            {% endfor -%}
          </div>
        {% endif %}
      {% endwith %}
      <div class="form-group">
        <label>Last name:</label>
        <input type="text" class="form-control" name='last-name' value="{{session['user_input']['ln'] if session['user_input']}}">
      </div>
      {% with email = get_flashed_messages(category_filter=["email"]) %}
        {% if email %}
          {%- for msg in email %}
            <div class="alert alert-danger" role="alert">
              {{ msg }}
            </div>
          {% endfor -%}
        {% endif %}
      {% endwith %}
      <div class="form-group">
        <label>Email:</label>
        <input type="text" class="form-control" name='email' value="{{session['user_input']['email'] if session['user_input']}}">
      </div>
      {% with pw = get_flashed_messages(category_filter=["pw"]) %}
        {% if pw %}
          <div class="alert alert-danger" role="alert">
            {%- for msg in pw %}
              {{ msg }}
            {% endfor -%}
          </div>
        {% endif %}
      {% endwith %}
      <div class="form-group">
        <label>Password:</label>
        <input type="password" class="form-control" name='password'>
      </div>
      {% with confirm_pw = get_flashed_messages(category_filter=["confirm-pw"]) %}
        {% if confirm_pw %}
          <div class="alert alert-danger" role="alert">
            {%- for msg in confirm_pw %}
              {{ msg }}
            {% endfor -%}
          </div>
        {% endif %}
      {% endwith %}
      <div class="form-group">
        <label>Confirm password:</label>
        <input type="password" class="form-control" name='confirm-password'>
      </div>
      <button type="submit" class="btn btn-success">Register</button>
    </form>
    <form class="login" action='/login' method='POST'>
      <h2>Login</h2>
      {% with invalid = get_flashed_messages(category_filter=["invalid"]) %}
        {% if invalid %}
          <div class="alert alert-danger" role="alert">
            {%- for msg in invalid %}
              {{ msg }}
            {% endfor -%}
          </div>
        {% endif %}
      {% endwith %}
      <div class="form-group">
        <label>Email:</label>
        <input type="text" class="form-control" name='login-email'>
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" class="form-control" name='login-password'>
      </div>
      <button type="submit" class="btn btn-success">Login</button>
    </form>
  </div>
</body>
</html>